LIBDIR = rust/target/release
STATLIB = $(LIBDIR)/libperpetual_r.a
PKG_LIBS = -L$(LIBDIR) -lperpetual_r

$(SHLIB): $(STATLIB)

$(STATLIB):
	@echo "Building Rust library for Unix/macOS..."
	rustc --version
	cd rust && cargo build --release --lib --verbose --config 'source.crates-io.replace-with="vendored-sources"' --config 'source.vendored-sources.directory="../../inst/v"'

clean:
	rm -rf rust/target
